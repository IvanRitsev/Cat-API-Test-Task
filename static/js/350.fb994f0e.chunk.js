"use strict";(self.webpackChunkalfa_test_task_v1=self.webpackChunkalfa_test_task_v1||[]).push([[350],{116:(e,s,t)=>{t.d(s,{E:()=>i,N:()=>l});var a=t(3);const l=()=>(0,a.wA)(),i=a.d4},350:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(43),l=t(241),i=t(216),c=t(579);const n=e=>{let{cat:s,onDelete:t,onLike:n}=e;const r=(0,a.useRef)(null),d=(0,i.Zp)(),o=e=>{e.stopPropagation()};return(0,c.jsxs)("div",{onClick:()=>{d(`/products/${s.breeds[0].name}`)},className:"cat-card",children:[(0,c.jsx)("img",{src:s.url,alt:s.breeds[0].name}),(0,c.jsx)("h3",{children:s.breeds[0].name}),(0,c.jsx)("p",{children:s.breeds[0].description}),(0,c.jsxs)("div",{ref:r,className:"button-container",children:[(0,c.jsx)("button",{className:"remove-button",onClick:e=>{o(e),t()},children:(0,c.jsx)(l.A,{id:"remove-icon"})}),(0,c.jsx)("button",{onClick:e=>{o(e),n()},className:s.liked?"like-button liked":"like-button",children:(0,c.jsx)(l.A,{id:"like-icon"})})]})]})},r=a.memo(n);var d=t(116),o=t(213);class u{static getCats(){return o.A.get("https://api.thecatapi.com/v1/images/search?limit=50&has_breeds=1&lang=ru&api_key=live_iUz3xBRZfipCJCIU76AfXZjLFx2vjG0vY4Qzp4KrPUKM611CiikqN4eeG9c9uZ0z")}}var h=t(742);const m=e=>{let{filter:s,onFilterChange:t}=e;const a=(0,d.N)(),l=e=>{const s=e.target.value;a((0,h.R6)(s)),t(s)};return(0,c.jsxs)("div",{className:"cats-filter",children:[(0,c.jsxs)("div",{className:"cats-filter__title",onClick:()=>{var e,s;null===(e=document.querySelector(".cats-filter__options"))||void 0===e||e.classList.toggle("active"),null===(s=document.querySelector(".cats-filter__title"))||void 0===s||s.classList.toggle("active-filter")},children:["\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e ","all"===s?"\u0432\u0441\u0435\u043c":"\u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u043c"]}),(0,c.jsxs)("div",{className:"cats-filter__options",children:[(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{onChange:l,value:"all",name:"cats",type:"radio",checked:"all"===s})," ","\u0412\u0441\u0435"]}),(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{onChange:l,value:"liked",name:"cats",type:"radio",checked:"liked"===s})," ","\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435"]})]})]})},g=e=>{let{cardsPerPage:s,totalCards:t,paginate:a,currentPage:l}=e;const i=[];for(let c=1;c<=Math.ceil(t/s);c++)i.push(c);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"pagination",children:[(0,c.jsx)("button",{onClick:()=>a(l-1),disabled:1===l,children:"\u041d\u0430\u0437\u0430\u0434"}),i.map((e=>(0,c.jsx)("button",{className:""+(e===l?"active":""),onClick:()=>a(e),children:e},e))),(0,c.jsx)("button",{onClick:()=>a(l+1),disabled:l===i.length,children:"\u0412\u043f\u0435\u0440\u0435\u0434"})]})})},j=()=>{const[e,s]=(0,a.useState)(1),[t]=(0,a.useState)(9),i=(0,d.N)(),{cats:n,filter:o,isLoading:j}=(0,d.E)((e=>e.CatsSliceReducer)),x=(0,a.useMemo)((()=>"all"===o?n:n.filter((e=>e.liked))),[n,o]),v=e*t,k=v-t,p=x.slice(k,v);(0,a.useEffect)((()=>{0===x.length&&i((async e=>{try{e(h.si.actions.fetchCats());const s=await u.getCats();200===s.status?e(h.si.actions.fetchCatsSuccess(s)):e(h.si.actions.fetchCatsError(s))}catch(s){console.log(s)}}))}),[i]),(0,a.useEffect)((()=>{s(1)}),[o]);const f=(0,a.useCallback)((e=>{i((0,h.R6)(e))}),[i]);return(0,c.jsx)("div",{className:"cats-page",children:(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)(m,{filter:o,onFilterChange:f}),j?(0,c.jsx)("div",{className:"loading",children:(0,c.jsx)(l.A,{id:"loading-spinner"})}):null,!j&&0===x.length&&(0,c.jsx)("div",{className:"liked-cats-undefind",children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u0442\u043e\u0432 \u043d\u0435\u0442"}),!j&&x.length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"cards",children:p.map((e=>(0,c.jsx)(r,{cat:e,onLike:()=>i((0,h.GB)(e.id)),onDelete:()=>i((0,h.TG)(e.id))},e.id)))}),(0,c.jsx)(g,{cardsPerPage:t,totalCards:x.length,paginate:e=>{s(e)},currentPage:e})]})]})})},x=(0,a.memo)(j)}}]);
//# sourceMappingURL=350.fb994f0e.chunk.js.map